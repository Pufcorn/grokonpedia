<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Grokonpedia – Lettre</title>
<style>
    body {
        background: #333;
        color: #fff;
        font-family: sans-serif;
        margin: 20px;
        line-height: 1.4;
    }

    #content {
        max-width: 800px;
        margin: auto;
        padding: 20px;
        background: #444;
        border-radius: 10px;
    }

    h1 {
        text-align: center;
        margin-bottom: 30px;
        font-size: 2em;
    }

    .word {
        font-weight: bold;
        font-size: 1.3em;
        margin-top: 20px;
        margin-bottom: 5px;
    }

    .definition {
        margin-left: 10px;
        margin-bottom: 15px;
    }
</style>
</head>
<body>

<div id="content">Chargement…</div>

<script>
// Obtenir la lettre (f=A ou B ou Z…)
const params = new URLSearchParams(window.location.search);
const file = params.get('f');

if (!file) {
    document.getElementById('content').innerHTML = "Erreur : aucune lettre reçue.";
}

// Charger le fichier Markdown
fetch(`${file}.md`)
    .then(r => r.text())
    .then(txt => {
        // Nettoyer
        txt = txt.replace(/^[#]+/gm, "");       // Enlève les #
        txt = txt.replace(/Conversion Markdown/gi, ""); // Débarrasse du titre de marde

        const lines = txt.split(/\n+/);

        let html = "";

        // Le premier élément, c'est la lettre → titre
        const letter = lines.shift().trim();
        html += `<h1>${letter}</h1>`;

        // Pour chaque bloc mot + définition
        for (let i = 0; i < lines.length; i++) {

            const line = lines[i].trim();

            // Mot (ligne qui n’a pas de point)
            if (line && !line.match(/^v\.|^n\.|^adj\.|^Expr\.|EX|—/)) {
                html += `<div class="word">${line}</div>`;
            }
            else if (line) {
                html += `<div class="definition">${line}</div>`;
            }
        }

        document.getElementById("content").innerHTML = html;
    })
    .catch(err => {
        document.getElementById('content').innerHTML = "Erreur de chargement.";
    });
</script>

</body>
</html>
